<link rel="stylesheet" href="./modules/contabilidad/contabilidad.css">

<div class="con-container">
    <div class="con-menu-lateral">
        <div class="con-brand-section">
            <h2 class="con-module-title">ğŸ’° Contabilidad</h2>
            <p class="con-module-subtitle">MÃ³dulo Administrativo</p>
        </div>

        <h3 class="con-menu-section-title">ğŸ“Š Finanzas</h3>
        <button class="con-submenu-btn" data-vista="con-dashboard">ğŸ“ˆ Dashboard Financiero</button>
        <button class="con-submenu-btn" data-vista="con-facturacion">ğŸ“‘ FacturaciÃ³n</button>
        <button class="con-submenu-btn" data-vista="con-pagos">ğŸ’³ Control de Pagos</button>

        <h3 class="con-menu-section-title">ğŸ›’ Compras</h3>
        <button class="con-submenu-btn" data-vista="com-solicitudes">ğŸ“© Solicitudes Recibidas</button>
        <button class="con-submenu-btn" data-vista="com-ordenes">ğŸ“ Ã“rdenes de Compra</button>
        <button class="con-submenu-btn" data-vista="com-proveedores">ğŸ¤ Proveedores</button>
        <button class="con-submenu-btn" data-vista="com-bajas">ğŸ—‘ï¸ Bajas de Inventario</button>
        <button class="con-submenu-btn" data-vista="com-manufacturados">ğŸ”§ Manufacturados</button>

        <h3 class="con-menu-section-title">ğŸ“‹ Reportes</h3>
        <button class="con-submenu-btn" data-vista="con-tab-reporte">ğŸ“… Reporte Mensual</button>

        <h3 class="con-menu-section-title">ğŸ“Š Exportar Datos</h3>
        <button class="con-submenu-btn" onclick="exportarContabilidadAExcel()">ğŸ“Š Exportar Contabilidad a Excel</button>
    </div>

    <div class="con-area-dinamica">
        <div class="con-encabezado">
            <h1 class="con-titulo">Sistema Contable y Compras</h1>
            <p class="con-subtitulo">GestiÃ³n de recursos, egresos y adquisiciones de la empresa.</p>
        </div>

        <div class="con-dashboard-tabs">
            <button class="con-tab-btn active" data-vista="con-dashboard">Resumen Contable</button>
            <button class="con-tab-btn" data-vista="com-presupuestos">Presupuestos Compras</button>
        </div>

        <div id="con-tab-panel">
            <div class="con-placeholder">
                <p>Seleccione una opciÃ³n del menÃº para comenzar...</p>
            </div>
        </div>
    </div>
</div>

<script>
    // Usamos el timeout de 100ms solicitado para asegurar carga de datos
    setTimeout(() => {
        document.querySelectorAll('.con-tab-btn, .con-submenu-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const vista = e.currentTarget.dataset.vista;
                
                // Manejo de clase Active en Tabs
                if (e.currentTarget.classList.contains('con-tab-btn')) {
                    document.querySelectorAll('.con-tab-btn').forEach(b => b.classList.remove('active'));
                    e.currentTarget.classList.add('active');
                }
                
                // Manejo de selecciÃ³n en MenÃº Lateral
                if (e.currentTarget.classList.contains('con-submenu-btn')) {
                    document.querySelectorAll('.con-submenu-btn').forEach(b => {
                        b.classList.remove('active-item');
                    });
                    e.currentTarget.classList.add('active-item');
                }
                
                console.log("Cargando vista:", vista);
                // AquÃ­ llamarÃ­as a tu funciÃ³n loadVista(vista)
            });
        });
    }, 100);
</script>